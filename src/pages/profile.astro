---
import Layout from '../layouts/Layout.astro';
import { Image } from 'astro:assets';
import profileImage from '../assets/images/profile.jpg';
import { Icon } from 'astro-icon/components';
import { loadProfile } from '../data/profileLoader';

const profileData = loadProfile();

const qualIconMap: Record<string, string> = {
  中小企業診断士: 'ri:focus-3-line',
  ITストラテジスト: 'ri:computer-line',
  E資格: 'ri:robot-line',
  データベーススペシャリスト: 'ri:database-2-line',
  応用情報技術者: 'ri:smartphone-line',
  '税理士科目合格（簿記論）': 'ri:calculator-line',
};
---

<Layout
  title="プロフィール | ししゃもカンパニー"
  description="吉川昌宏のプロフィール。エンジニア12年＋会計事務所勤務。IT・会計・経営の3つの視点で、中小企業の経営課題を一緒に整理します。"
  currentPage="profile"
  showPersonSchema={true}
>
  <!-- Profile Hero -->
  <section class="profile-hero">
    <div class="profile-hero-inner">
      <div class="profile-photo-wrapper">
        <Image
          src={profileImage}
          alt="吉川昌宏"
          width={400}
          height={400}
          loading="eager"
        />
      </div>
      <div class="profile-hero-text">
        <h1>{profileData.name}</h1>
        <p class="subtitle">{profileData.subtitle}</p>
        <div class="profile-badges">
          {
            profileData.badges.map((badge, index) => (
              <span class={`profile-badge ${index < 2 ? 'highlight' : ''}`}>
                {badge.label}
              </span>
            ))
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Stats -->
  <section class="stats-section">
    <div class="stats-grid">
      {
        profileData.stats.slice(0, 3).map((stat) => (
          <div class="stat-card">
            <div class="stat-number">
              {stat.number}
              <span class="stat-unit">
                {stat.label.includes('年')
                  ? '年'
                  : stat.label.includes('+')
                    ? ''
                    : ''}
              </span>
            </div>
            <div class="stat-label">{stat.label.replace('年の', '')}</div>
          </div>
        ))
      }
    </div>
  </section>

  <!-- About My Work -->
  <section class="section">
    <div class="section-inner">
      <h2 class="section-title">私の仕事</h2>
      <div class="about-work">
        <p class="about-lead">
          壊れているものを見つけて、正しい状態に戻す。<br />
          SE時代はシステムの不具合を直し、会計事務所では数字の乱れを整え、今は経営の仕組みに取り組んでいます。<br
          />
          対象は変わっても、やっていることの根っこは同じです。
        </p>
        <p class="about-desc">
          Web開発12年、データサイエンス3年、会計事務所1年。<br />
          ITも数字もわかるから、「何のために」「今の体制でできるか」を一緒に考えられます。<br
          />
          記帳・月次の整備から、業務フロー改善、ツール導入まで一気通貫で対応します。
        </p>

        <h3 class="about-subtitle">大切にしている3つのこと</h3>
        <div class="pillars-grid">
          <div class="pillar-card">
            <div class="pillar-number">01</div>
            <h4>数字の土台づくり</h4>
            <p>
              「今どうなってるの？」がわかる状態を一緒に作ります。記帳・月次を整え、経営判断に使える数字に。
            </p>
          </div>
          <div class="pillar-card">
            <div class="pillar-number">02</div>
            <h4>属人化の解消</h4>
            <p>
              「あの人しかわからない」をなくします。業務をフロー・ルール・役割に落とし込んで、誰でも回せる形に。
            </p>
          </div>
          <div class="pillar-card">
            <div class="pillar-number">03</div>
            <h4>省力化と定着</h4>
            <p>
              ツールは入れて終わりじゃない。「ちゃんと使える・続けられる」まで一緒に走ります。
            </p>
          </div>
        </div>

        <div class="about-note">
          <p>
            DX支援やIT戦略もお受けしますが、派手な提案はしません。<br />
            「何のために？」「今の人員・予算でできる？」を一緒に考えて、<br />
            <strong>本当に回る形</strong>に落とし込むことを大事にしています。
          </p>
        </div>

        <div class="about-stance">
          <p>
            話はちゃんと聞きます。でも、結論は正直にお伝えします。<br />
            「やめた方がいい」も「今はまだ早い」も、根拠をもって言います。<br />
            <strong
              >冷静な頭と、目の前の人を何とかしたいという気持ち。両方で仕事をしています。</strong
            >
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Philosophy -->
  <section class="section section--alt">
    <div class="section-inner">
      <h2 class="section-title">大切にしていること</h2>
      <div class="philosophy-grid">
        {
          profileData.philosophy.map((item, index) => (
            <div class="philosophy-card">
              <div class="philosophy-number">
                {String(index + 1).padStart(2, '0')}
              </div>
              <h4>{item.title}</h4>
              <p>{item.content}</p>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Career Timeline -->
  <section class="section">
    <div class="section-inner">
      <h2 class="section-title">経歴</h2>
      <div class="timeline">
        {
          profileData.career.map((item) => (
            <div class="timeline-item">
              <div class="timeline-date">
                {item.period.replace('〜', ' - ')}
              </div>
              <div class="timeline-title">{item.title}</div>
              <div class="timeline-desc">{item.description}</div>
              <div class="timeline-tags">
                {item.tags.map((tag) => (
                  <span class="timeline-tag">{tag}</span>
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Qualifications -->
  <section class="section section--alt">
    <div class="section-inner">
      <h2 class="section-title">保有資格</h2>
      <div class="qual-grid">
        {
          profileData.qualifications.map((qual) => (
            <div class="qual-card">
              <div class="qual-icon">
                <Icon
                  name={qualIconMap[qual.name] || 'ri:award-line'}
                  size={22}
                />
              </div>
              <div class="qual-info">
                <h4>{qual.name}</h4>
                <p>{qual.description}</p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="section cta">
    <div class="cta-inner">
      <h2 class="cta-title">{profileData.cta.title}</h2>
      <p
        class="cta-desc"
        set:html={profileData.cta.description.replace(/\n/g, '<br>')}
      />
      <a
        href={profileData.cta.buttonLink}
        class="btn-primary"
        data-track-cta="profile"
      >
        {profileData.cta.buttonText}
        <Icon name="ri:arrow-right-line" size={14} />
      </a>
      <p class="cta-note">※ 相談だけでも問題ありません。雑談からでもどうぞ。</p>
    </div>
  </section>
</Layout>

<style>
  /* Profile Hero */
  .profile-hero {
    padding: 120px 24px 80px;
    background: var(--color-bg-secondary) url('/wp1.webp') center center / cover
      no-repeat;
    position: relative;
    overflow: hidden;
  }
  .profile-hero::before {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--color-overlay-gradient);
  }
  .profile-hero-inner {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    gap: 48px;
    position: relative;
    z-index: 1;
  }
  .profile-photo-wrapper {
    width: 200px;
    height: 200px;
    border-radius: var(--radius-lg);
    overflow: hidden;
    flex-shrink: 0;
    border: 3px solid var(--color-accent);
    box-shadow: var(--shadow-semantic-lg);
  }
  .profile-photo-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .profile-hero-text h1 {
    font-family: var(--font-display);
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--color-text-heading);
  }
  .profile-hero-text .subtitle {
    font-size: 0.9375rem;
    color: var(--color-text-secondary);
    margin-bottom: 20px;
    line-height: 1.7;
  }
  .profile-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }
  .profile-badge {
    padding: 6px 14px;
    background: var(--color-bg-tertiary);
    color: var(--color-text);
    border-radius: 100px;
    font-size: var(--font-size-xs);
    font-weight: 500;
  }
  .profile-badge.highlight {
    background: var(--color-accent-subtle);
    color: var(--color-accent-text);
    font-weight: 600;
  }

  /* Stats Section */
  .stats-section {
    padding: 0 24px;
    margin-top: -40px;
    position: relative;
    z-index: 10;
  }
  .stats-grid {
    max-width: 900px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
  }
  .stat-card {
    background: var(--color-card-bg);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 24px;
    text-align: center;
    transition: all 0.2s;
    box-shadow: var(--shadow-semantic-sm);
  }
  .stat-card:hover {
    border-color: var(--color-accent);
  }
  .stat-number {
    font-family: var(--font-sans);
    font-size: var(--font-size-4xl);
    font-weight: 700;
    color: var(--color-accent);
  }
  .stat-unit {
    font-size: var(--font-size-base);
    font-weight: 500;
  }
  .stat-label {
    font-size: 0.8125rem;
    color: var(--color-text-secondary);
    margin-top: 4px;
  }

  /* Section Common */
  .section {
    padding: 80px 24px;
  }
  .section--alt {
    background: var(--color-bg-secondary);
  }
  .section-inner {
    max-width: 900px;
    margin: 0 auto;
  }
  .section-title {
    font-size: 1.375rem;
    color: var(--color-text-heading);
    -webkit-text-fill-color: var(--color-text-heading);
    background: none;
    margin-bottom: 32px;
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .section-title::before {
    content: '';
    width: 4px;
    height: 24px;
    background: var(--color-accent);
    border-radius: 2px;
  }
  .section-subtitle {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    margin-top: -24px;
    margin-bottom: 32px;
  }

  /* About My Work */
  .about-work {
    background: var(--color-card-bg);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-md);
    padding: 40px;
    box-shadow: var(--shadow-semantic-sm);
  }
  .about-lead {
    font-size: 1.0625rem;
    line-height: 1.9;
    color: var(--color-text-heading);
    margin-bottom: 16px;
    font-weight: 500;
  }
  .about-desc {
    font-size: 0.9375rem;
    line-height: 2;
    color: var(--color-text);
    margin-bottom: 32px;
  }
  .about-subtitle {
    font-family: var(--font-display);
    font-size: var(--font-size-lg);
    font-weight: 700;
    color: var(--color-text-heading);
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  .about-subtitle::before {
    content: '';
    width: 3px;
    height: 18px;
    background: var(--color-accent);
    border-radius: 2px;
  }
  .pillars-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 16px;
    margin-bottom: 32px;
  }
  .pillar-card {
    background: var(--color-bg-tertiary);
    border-radius: var(--radius-sm);
    padding: 24px 20px;
    position: relative;
  }
  .pillar-number {
    font-family: var(--font-sans);
    font-size: var(--font-size-xs);
    font-weight: 700;
    color: var(--color-accent);
    margin-bottom: 8px;
    letter-spacing: 0.05em;
  }
  .pillar-card h4 {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--color-text-heading);
    margin-bottom: 8px;
  }
  .pillar-card p {
    font-size: 0.8125rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
  }
  /* Philosophy Grid */
  .philosophy-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }
  .philosophy-card {
    background: var(--color-card-bg);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-sm);
    padding: 24px 20px;
    transition: all 0.2s;
    box-shadow: var(--shadow-semantic-sm);
  }
  .philosophy-card:hover {
    border-color: var(--color-accent);
  }
  .philosophy-number {
    font-family: var(--font-sans);
    font-size: var(--font-size-xs);
    font-weight: 700;
    color: var(--color-accent);
    margin-bottom: 8px;
    letter-spacing: 0.05em;
  }
  .philosophy-card h4 {
    font-size: 0.9375rem;
    font-weight: 700;
    color: var(--color-text-heading);
    margin-bottom: 8px;
  }
  .philosophy-card p {
    font-size: 0.8125rem;
    line-height: 1.7;
    color: var(--color-text-secondary);
  }

  .about-note {
    background: var(--color-accent-subtle);
    border-radius: var(--radius-sm);
    padding: 20px 24px;
    margin-bottom: 24px;
  }
  .about-note p {
    font-size: var(--font-size-sm);
    line-height: 1.9;
    color: var(--color-text);
  }
  .about-stance {
    padding-top: 8px;
  }
  .about-stance p {
    font-size: 0.9375rem;
    line-height: 2;
    color: var(--color-text);
  }
  .about-stance strong {
    color: var(--color-accent);
  }

  /* Timeline */
  .timeline {
    position: relative;
    padding-left: 32px;
  }
  .timeline::before {
    content: '';
    position: absolute;
    left: 0;
    top: 8px;
    bottom: 8px;
    width: 2px;
    background: var(--color-border);
    border-radius: 2px;
  }
  .timeline-item {
    position: relative;
    padding-bottom: 32px;
  }
  .timeline-item:last-child {
    padding-bottom: 0;
  }
  .timeline-item::before {
    content: '';
    position: absolute;
    left: -32px;
    top: 6px;
    width: 12px;
    height: 12px;
    background: var(--color-accent);
    border-radius: 50%;
    transform: translateX(-50%);
    border: 2px solid var(--color-bg);
  }
  .timeline-date {
    font-size: var(--font-size-xs);
    color: var(--color-accent);
    font-weight: 600;
    margin-bottom: 4px;
    letter-spacing: 0.02em;
  }
  .timeline-title {
    font-size: var(--font-size-base);
    font-weight: 700;
    margin-bottom: 8px;
    color: var(--color-text-heading);
  }
  .timeline-desc {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
    line-height: 1.8;
  }
  .timeline-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin-top: 12px;
  }
  .timeline-tag {
    font-size: 0.6875rem;
    padding: 4px 10px;
    background: var(--color-bg-tertiary);
    border-radius: 100px;
    color: var(--color-text);
  }

  /* Qualifications */
  .qual-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 12px;
  }
  .qual-card {
    background: var(--color-card-bg);
    border: 2px solid var(--color-border);
    border-radius: var(--radius-sm);
    padding: 16px 20px;
    display: flex;
    align-items: center;
    gap: 16px;
    transition: all 0.2s;
    box-shadow: var(--shadow-semantic-sm);
  }
  .qual-card:hover {
    border-color: var(--color-accent);
  }
  .qual-icon {
    width: 44px;
    height: 44px;
    background: var(--color-accent-subtle);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
  .qual-icon svg {
    width: 22px;
    height: 22px;
    color: var(--color-accent);
  }
  .qual-info h4 {
    font-size: var(--font-size-sm);
    font-weight: 600;
    color: var(--color-text-heading);
    margin-bottom: 2px;
  }
  .qual-info p {
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
  }

  /* Responsive */
  @media (max-width: 768px) {
    .profile-hero {
      padding: 96px 24px 60px;
    }
    .profile-hero-inner {
      flex-direction: column;
      text-align: center;
      gap: 24px;
    }
    .profile-photo-wrapper {
      width: 160px;
      height: 160px;
    }
    .profile-hero-text h1 {
      font-size: 1.625rem;
    }
    .profile-badges {
      justify-content: center;
    }
    .stats-section {
      margin-top: -30px;
    }
    .stats-grid {
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
    }
    .stat-card {
      padding: 20px 16px;
    }
    .stat-number {
      font-size: 1.5rem;
    }
    .section {
      padding: 48px 20px;
    }
    .section-title {
      font-size: 1.1875rem;
    }
    .qual-grid {
      grid-template-columns: 1fr;
    }
    .about-work {
      padding: 24px 16px;
    }
    .pillars-grid {
      grid-template-columns: 1fr;
      gap: 12px;
    }
    .philosophy-grid {
      grid-template-columns: 1fr;
      gap: 12px;
    }
  }

  @media (max-width: 480px) {
    .profile-hero {
      padding: 88px 16px 48px;
    }
    .profile-photo-wrapper {
      width: 140px;
      height: 140px;
    }
    .profile-hero-text h1 {
      font-size: 1.375rem;
    }
    .profile-badge {
      font-size: 0.6875rem;
      padding: 5px 10px;
    }
    .stats-grid {
      gap: 8px;
    }
    .stat-card {
      padding: 16px 12px;
    }
    .stat-number {
      font-size: 1.25rem;
    }
    .stat-label {
      font-size: 0.6875rem;
    }
    .section {
      padding: 40px 16px;
    }
    .timeline {
      padding-left: 24px;
    }
    .timeline-item::before {
      left: -24px;
      width: 10px;
      height: 10px;
    }
  }

  @media (hover: none) {
    .stat-card:hover,
    .qual-card:hover,
    .philosophy-card:hover {
      border-color: var(--color-border);
    }
  }
</style>
