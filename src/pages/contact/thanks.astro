---
import Layout from '../../layouts/Layout.astro';
---

<Layout
  title="送信完了 | ししゃもカンパニー"
  description="お問い合わせありがとうございます。24時間以内にご返信いたします。"
  currentPage="contact"
>
  <section class="thanks-section">
    <div class="thanks-blob"></div>
    <div class="thanks-inner">
      <div class="thanks-card">
        <div class="thanks-icon">
          <svg class="check-svg" viewBox="0 0 52 52" width="64" height="64" fill="none">
            <circle class="check-circle" cx="26" cy="26" r="24" stroke="#10b981" stroke-width="3" fill="none" />
            <path class="check-mark" d="M15 27l7 7 15-15" stroke="#10b981" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none" />
          </svg>
        </div>
        <h1>送信が完了しました</h1>
        <p class="thanks-message">
          お問い合わせいただきありがとうございます。<br>
          内容を確認の上、<strong>24時間以内</strong>にご連絡いたします。
        </p>

        <div class="thanks-info">
          <div class="info-item">
            <div class="info-icon-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="4" width="20" height="16" rx="2" />
                <path d="M22 4L12 13 2 4" />
              </svg>
            </div>
            <div>
              <h3>返信メールについて</h3>
              <p>masatheultimater@gmail.com からご連絡いたします。迷惑メールフォルダもご確認ください。</p>
            </div>
          </div>
          <div class="info-item">
            <div class="info-icon-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10" />
                <path d="M12 6v6l4 2" />
              </svg>
            </div>
            <div>
              <h3>お急ぎの場合</h3>
              <p>緊急のご相談は、返信メール内の連絡先へお電話ください。</p>
            </div>
          </div>
        </div>

        <div class="thanks-cta">
          <a href="/" class="btn-primary">トップページへ戻る</a>
          <a href="/services/" class="btn-secondary">サービスを見る</a>
        </div>
      </div>
    </div>
  </section>
  <!-- GTM: Track conversion on page load -->
  <script>
    import { trackConversion } from '../../lib/analytics';
    const convType = (document.referrer || '').includes('/quote') ? 'quote' : 'contact';
    trackConversion({ conversion_type: convType as 'contact' | 'quote' });

  </script>
</Layout>

<style>
  .thanks-section {
    min-height: calc(100vh - 200px);
    padding: 8rem 2rem 4rem;
    display: flex; align-items: center; justify-content: center;
    background: var(--gradient-hero-bg);
    position: relative; overflow: hidden;
  }
  .thanks-section::before {
    content: ''; position: absolute; top: -50%; right: -30%; width: 80%; height: 200%;
    background: radial-gradient(ellipse, rgba(16,185,129,0.1) 0%, transparent 70%);
  }

  /* Improvement 5: Morphing blob background */
  .thanks-blob {
    position: absolute;
    left: 10%;
    top: 40%;
    transform: translateY(-50%);
    width: 280px;
    height: 280px;
    background: linear-gradient(135deg, #10b981, var(--primary));
    border-radius: 30% 70% 70% 30% / 30% 30% 70% 70%;
    opacity: 0.06;
    animation: morph 8s ease-in-out infinite;
    pointer-events: none;
  }

  .thanks-inner { max-width: 600px; width: 100%; position: relative; z-index: 1; }

  /* Improvement 3: Accent bar at top of card */
  .thanks-card {
    background: var(--white); border-radius: var(--radius-lg); padding: 3rem;
    box-shadow: var(--shadow-xl); text-align: center;
    position: relative; overflow: hidden;
  }
  .thanks-card::before {
    content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
    background: linear-gradient(90deg, #10b981, var(--primary));
  }

  /* Improvement 7: Staggered fade-in for children */
  .thanks-card > * {
    opacity: 0;
    animation: fadeInUp 0.5s ease-out forwards;
  }
  .thanks-card > *:nth-child(1) { animation-delay: 0.1s; }
  .thanks-card > *:nth-child(2) { animation-delay: 0.2s; }
  .thanks-card > *:nth-child(3) { animation-delay: 0.35s; }
  .thanks-card > *:nth-child(4) { animation-delay: 0.5s; }
  .thanks-card > *:nth-child(5) { animation-delay: 0.65s; }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(12px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Improvement 1: SVG checkmark animation */
  .thanks-icon {
    margin-bottom: 1.5rem;
    position: relative;
    display: inline-block;
  }

  /* Improvement 2: Glow ring behind icon */
  .thanks-icon::before {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 90px; height: 90px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(16,185,129,0.2) 0%, transparent 70%);
    animation: pulseGlow 2.5s ease-in-out infinite;
  }

  @keyframes pulseGlow {
    0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
    50% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; }
  }

  .check-svg { position: relative; z-index: 1; }

  .check-circle {
    stroke-dasharray: 151;
    stroke-dashoffset: 151;
    animation: drawCircle 0.6s ease-out 0.2s forwards;
  }

  .check-mark {
    stroke-dasharray: 40;
    stroke-dashoffset: 40;
    animation: drawCheck 0.4s ease-out 0.7s forwards;
  }

  @keyframes drawCircle {
    to { stroke-dashoffset: 0; }
  }

  @keyframes drawCheck {
    to { stroke-dashoffset: 0; }
  }

  .thanks-card h1 {
    font-family: var(--font-display); font-size: 1.75rem; font-weight: 700;
    margin-bottom: 1rem;
    background: linear-gradient(135deg, var(--dark), var(--accent));
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
  }

  .thanks-message {
    font-size: 1rem; color: var(--gray); line-height: 1.8; margin-bottom: 2rem;
  }
  .thanks-message strong { color: var(--accent); }

  /* Improvement 4: Info items as mini-cards */
  .thanks-info {
    display: flex; flex-direction: column; gap: 0.75rem;
    margin-bottom: 2rem; text-align: left;
  }

  .info-item {
    display: flex; gap: 1rem; align-items: flex-start;
    background: var(--gray-lighter);
    border-radius: var(--radius-md);
    padding: 1rem 1.25rem;
    border-left: 3px solid #10b981;
  }

  .info-icon-wrapper {
    flex-shrink: 0;
    width: 36px; height: 36px;
    display: flex; align-items: center; justify-content: center;
    background: rgba(16,185,129,0.1);
    border-radius: var(--radius-sm, 6px);
    color: #10b981;
  }

  .info-item h3 { font-size: 0.9rem; font-weight: 700; margin-bottom: 0.25rem; }
  .info-item p { font-size: 0.85rem; color: var(--gray); line-height: 1.6; }

  .thanks-cta { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; }

  /* ===== DARK MODE ===== */
  :global([data-theme="dark"]) .thanks-section::before {
    background: radial-gradient(ellipse, rgba(96, 165, 250, 0.08) 0%, transparent 70%);
  }
  :global([data-theme="dark"]) .thanks-blob {
    background: linear-gradient(135deg, var(--primary), var(--accent));
    opacity: 0.08;
  }
  :global([data-theme="dark"]) .thanks-card {
    background: var(--gray-100);
    box-shadow: var(--shadow-lg);
  }
  :global([data-theme="dark"]) .thanks-card h1 {
    background: none;
    -webkit-background-clip: unset;
    -webkit-text-fill-color: var(--dark);
    background-clip: unset;
  }
  :global([data-theme="dark"]) .thanks-message { color: var(--gray-600); }
  :global([data-theme="dark"]) .thanks-message strong { color: var(--accent); }
  :global([data-theme="dark"]) .info-item {
    background: var(--gray-50);
    border-left-color: var(--accent);
  }
  :global([data-theme="dark"]) .info-icon-wrapper {
    background: rgba(96, 165, 250, 0.12);
    color: var(--accent);
  }
  :global([data-theme="dark"]) .info-item h3 { color: var(--dark); }
  :global([data-theme="dark"]) .info-item p { color: var(--gray-600); }
  :global([data-theme="dark"]) .check-circle,
  :global([data-theme="dark"]) .check-mark { stroke: var(--accent); }
  :global([data-theme="dark"]) .thanks-icon::before {
    background: radial-gradient(circle, rgba(96,165,250,0.15) 0%, transparent 70%);
  }
  :global([data-theme="dark"]) .thanks-card::before {
    background: linear-gradient(90deg, var(--accent), var(--primary));
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .thanks-card > * { animation: none; opacity: 1; }
    .check-circle, .check-mark { animation: none; stroke-dashoffset: 0; }
    .thanks-icon::before { animation: none; }
    .thanks-blob { animation: none; }
  }

  @media (max-width: 768px) {
    .thanks-section { padding: 6rem 1.5rem 3rem; }
    .thanks-card { padding: 2rem 1.5rem; }
    .check-svg { width: 52px; height: 52px; }
    .thanks-icon::before { width: 72px; height: 72px; }
    .thanks-card h1 { font-size: 1.5rem; }
    .thanks-message { font-size: 0.95rem; }
    .thanks-cta { flex-direction: column; }
    .thanks-cta .btn-primary,
    .thanks-cta .btn-secondary { width: 100%; justify-content: center; }
    .thanks-blob { width: 200px; height: 200px; left: 5%; }
  }

  @media (max-width: 480px) {
    .thanks-section { padding: 5.5rem 1rem 2.5rem; }
    .thanks-card { padding: 1.5rem 1rem; }
    .thanks-card h1 { font-size: 1.35rem; }
    .info-item { flex-direction: column; gap: 0.5rem; }
    .thanks-blob { display: none; }
  }
</style>
